{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: [
    ":disableRateLimiting",
    ":dependencyDashboard",
    ":semanticCommits",
    ":timezone(Europe/Paris)", // TODO
    "customManagers:dockerfileVersions",
    "github>becloudless/becloudless//assets/renovate/presets/bcl.json5",
    "github>becloudless/becloudless//assets/renovate/presets/go.json5",
    "github>becloudless/becloudless//assets/renovate/presets/githubAction.json5",
    "github>becloudless/becloudless//assets/renovate/presets/semanticCommits.json5",
    "github>becloudless/becloudless//assets/renovate/presets/groups.json5",
    "github>becloudless/becloudless//assets/renovate/presets/lockFileMaintenance.json5",
    "github>becloudless/becloudless//assets/renovate/presets/renovate.json5",
  ],
  suppressNotifications: [
    "prEditedNotification",
    "prIgnoreNotification",
  ],

  automergeType: "branch",
  automergeStrategy: "squash",

  branchConcurrentLimit: 0,
  // TODO platform automerge requires to put some mandatory checks, else it will be merged, even if the CI is red
  //platformAutomerge: true, // do not wait for next renovate run if the platform support automerge
  minimumReleaseAge: "3 days",
  labels: ["dependencies"],

  flux: {
    fileMatch: [".+\\.yaml$"]
  },
  "helm-values": {
    fileMatch: [".+\\.yaml$"]
  },
  kubernetes: {
    fileMatch: [".+\\.yaml$"]
  },
  nix: {
    enabled: true
  },

  regexManagers: [
    {
      description: "Docker image and tag classic helm values declaration",
      fileMatch: [".+\\.yaml$"],
      matchStrings: [
        "image:\\s+repository: (?<depName>.+?)\\s+tag: (?<currentValue>.+?)\\s"
      ],
      datasourceTemplate: "docker",
      versioningTemplate: "docker"
    }
  ],

  packageRules: [
    {
      matchPackagePatterns: ["mailu"],
      groupName: "mailu"
    },
    {
      matchPackagePatterns: ["intel-gpu"],
      groupName: "intel-gpu"
    },
    {
      matchUpdateTypes: ["minor", "patch", "pin", "digest"],
      automerge: true,
    },
  ],

}